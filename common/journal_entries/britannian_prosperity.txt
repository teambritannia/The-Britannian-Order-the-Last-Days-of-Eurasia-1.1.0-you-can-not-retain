je_britannian_prosperity = {
	icon = "gfx/interface/icons/event_icons/event_fire.dds"

	group = je_group_historical_content


	fail = {
		custom_tooltip = {
			text = je_britannia_collapse_tt
			var:britannian_prosperity_var >= 5
		}
	}

	on_fail = {
		trigger_event = { id = britannian_prosperity.2 }
		remove_variable = britannian_prosperity_var
	}

	current_value = {
		value = var:britannian_prosperity_var
	}

	goal_add_value = {
		add = 5
	}
	
	progressbar = yes

	on_weekly_pulse = {
		effect = {
			if = {
				limit = {
					AND = {
						NOT = { has_variable = mexican_war_started }
						any_diplomatic_play = {
							initiator_is = c:MEX
							target_is = c:GBR
						}
					}
				}
				set_variable = mexican_war_started
				trigger_event = { id = britannian_prosperity.3 }
				change_variable = { name = britannian_prosperity_var add = 1 }
			}
			if = {
				limit = {
					AND = {
						NOT = { has_variable = vietnam_war_started }
						any_diplomatic_play = {
							initiator_is = c:DAI
							target_is = c:GBR	
						}
					}
				}
				set_variable = vietnam_war_started
				trigger_event = { id = britannian_prosperity.5 }
				change_variable = { name = britannian_prosperity_var add = 1 }
			}
			if = {
				limit = {
					AND = {
						NOT = { has_variable = american_war }
						any_diplomatic_play = {
							initiator_is = c:BNA
							target_is = c:GBR	
						}
					}
				}
				set_variable = vietnam_war_started
				trigger_event = { id = britannian_prosperity.6 }
				change_variable = { name = britannian_prosperity_var add = 5 }
			}
			if = {
				limit = {
					AND = {
						NOT = { has_variable = german_bna_war }
						any_diplomatic_play = {
							initiator_is = c:BNA
							target_is = c:GER	
						}
					}
				}
				set_variable = german_bna_war
				trigger_event = { id = britannian_prosperity.7 }
				change_variable = { name = britannian_prosperity_var add = 1 }
			}
		}
	}

	weight = 10000
	should_be_pinned_by_default = yes
}

je_economic_recovery = {
	icon = "gfx/interface/icons/ig_icons/industrialists.dds"

	group = je_group_historical_content
	
	scripted_button = rec_sell_burgundy
	
	scripted_button = rec_sell_amazons
	
	immediate = {
		add_modifier = {
			name = britannia_fall
		}
	}
	
	scripted_progress_bar = economic_recovery_progress_bar
	
	complete = {
		custom_tooltip = {
			text = recover_economy
			scope:journal_entry = {
				"scripted_bar_progress(economic_recovery_progress_bar)" >= 200
			}
		}
 	}
	
	fail = {
		custom_tooltip = {
			text = recover_economy_fail
			scope:journal_entry = {
				"scripted_bar_progress(economic_recovery_progress_bar)" <= 0
			}
		}
    	}
	
	on_complete = {
		remove_modifier = britannia_fall
	}
	
	on_fail = {
		c:GBR = {
			set_country_type = decentralized	
		}
	}
	
	weight = 1000
	can_revolution_inherit = yes
	should_be_pinned_by_default = yes
}

je_occitan_crisis = {
	icon = "gfx/interface/icons/event_icons/event_protest.dds"

	group = je_group_historical_content
	
	scripted_progress_bar = french_alertness_progress_bar
	
	scripted_progress_bar = infiltration_level_progress_bar
	
	scripted_button = assassinate_occitan_leader
	
	scripted_button = discredit_occitan_figures
	
	scripted_button = raid_occitan_cells
	
	scripted_button = infiltrate_occitan_organizations
	
	scripted_button = sabotage_occitan_operations
	
	scripted_button = arrest_involved_protesters
	
	scripted_button = provide_financial_incentives
	
	is_shown_when_inactive = {
		owner = {
			c:FRA ?= this
		}
	}
	
	possible = {
		owner = {
			c:FRA ?= this
		}
		exists = c:OCC
	}
	
	immediate = {
	}
	
	complete = {
    }
	
	fail = {
    }
	
	on_complete = {
	}
	
	on_fail = {
	}
	
	weight = 1000
	can_revolution_inherit = yes
	should_be_pinned_by_default = yes
}

je_occitan_republicanism = {
	icon = "gfx/interface/icons/event_icons/event_election.dds"

	group = je_group_historical_content
	
	scripted_progress_bar = occitan_infiltration_progress
	
	scripted_button = plan_speech
	
	scripted_button = fan_republican_flames
	
	scripted_button = propaganda_posters
	
	scripted_button = infiltrate_low_level_posts
	
	scripted_button = operational_wrapup

	
	immediate = {
		if = {
			limit = {
				NOT = {
					has_variable = occitan_states_counter
				}
			}
			c:FRA = {
				random_scope_state = {
					limit = {
						state_region = s:STATE_AQUITAINE
					}
					add_modifier = {
						name = current_operational_state
					}
				}
			}
		}
	}
	
	is_shown_when_inactive = {
		exists = c:OCC
		THIS = c:OCC
	}
	
	possible = {
		owner = {
			c:OCC ?= this
		}
	}
	
	complete = {
		OR = {
			custom_tooltip = {
				text = secured_control
				has_variable = wrapped_up_operations
			}
			custom_tooltip = {
				text = operation_complete
				scope:journal_entry = {
					"scripted_bar_progress(occitan_infiltration_progress)" >= 100
				}
			}
		}
	}
	
	fail = {
   	}
	
	on_weekly_pulse = {
		scope:journal_entry = {
			"scripted_bar_progress(occitan_infiltration_progress)" = {
				save_scope_as = infiltration_prog_scope
			}
		}
	}
	
	on_complete = {
		c:FRA = {
			random_scope_state = {
				limit = {
					has_modifier = current_operational_state
				}
				remove_modifier = current_operational_state
				add_modifier = {
					name = occitan_operations_secured
				}
			}
		}
		if = {
			limit = {
				NOT = {
					has_variable = occitan_states_counter
				}
			}
			set_variable = {
				name = occitan_states_counter
				value = 1
			}
			c:OCC = {
				add_journal_entry = je_occitan_republicanism
			}
			c:FRA = {
				random_scope_state = {
					limit = {
						NOT = {
							has_modifier = occitan_operations_secured
						}
						any_neighbouring_state = {
							has_modifier = occitan_operations_secured
							owner = {
								this = c:OCC
							}
						}
					}
					add_modifier = {
						name = current_operational_state
					}
				}
			}
		}
		else_if = {
			limit = {
				var:occitan_states_counter < 5
			}
			change_variable = {
				name = occitan_states_counter
				add = 1
			}
			c:OCC = {
				add_journal_entry = je_occitan_republicanism
			}
			c:FRA = {
				random_scope_state = {
					limit = {
						NOT = {
							has_modifier = current_operational_state
							has_modifier = occitan_operations_secured
						}
						any_neighbouring_state = {
							has_modifier = occitan_operations_secured
						}
					}
					add_modifier = {
						name = current_operational_state
					}
				}
			}
		}
		else_if = {
			limit = {
				occitan_states_counter >= 5
			}
			remove_variable = occitan_states_counter
		}
	}
	
	on_fail = {
	}
	
	weight = 1000
	can_revolution_inherit = yes
	should_be_pinned_by_default = yes
}
