fer_revitalize_bureaucracy_button = {
	name = "revitalize_bureaucracy_button"
	desc = "revitalize_bureaucracy_button_desc"

	visible = {
		always = yes
	}

	ai_chance = {
		base = 100
	}

	possible = {
		bureaucracy >= 0 
		has_modifier = political_turmoil
	}

	effect = {
		remove_modifier = political_turmoil
		add_modifier = {
			name = political_strife
			months = normal_modifier_time
			is_decaying = yes
		}
	}
}

fer_literacy_drive_button = {
	name = "literacy_drive_button"
	desc = "literacy_drive_button_desc"

	visible = {
		always = yes
	}

	ai_chance = {
		base = 100
		modifier = {
			trigger = {
				taking_loans = yes
			}
			add = -40
		}
		modifier = {
			trigger = {
				approaching_bureaucracy_shortage = yes
			}
			add = -30
		}
	}

	possible = {
		NOT = {
			bureaucracy < 0
		}
		NOT = {
			has_variable = var_literacy_drive
		}
	}

	effect = {
		set_variable = {
			name = var_literacy_drive
		}
		add_modifier = {
			name = national_improvement_expenses
			months = normal_modifier_time
		}
		add_modifier = {
			name = literacy_drive_modifier
			months = normal_modifier_time
		}
		remove_modifier = low_literacy_modifier
		add_modifier = {
			name = low_literacy_modifier
			months = short_modifier_time
			is_decaying = yes
		}
	}
}

fer_improving_healthcare_button = {
	name = "improving_healthcare_button"
	desc = "improving_healthcare_button_desc"

	visible = {
		always = yes
	}

	ai_chance = {
		base = 100
		modifier = {
			trigger = {
				taking_loans = yes
			}
			add = -40
		}
		modifier = {
			trigger = {
				approaching_bureaucracy_shortage = yes
			}
			add = -30
		}
		modifier = {
			trigger = {
				NOT = {
					has_law = law_type:law_no_hospitals
				}
			}
			add = -20
		}
	}

	possible = {
		NOT = {
			bureaucracy < 0
		}
		NOT = {
			has_variable = var_improving_healthcare
		}
	}

	effect = {
		set_variable = {
			name = var_improving_healthcare
		}
		add_modifier = {
			name = national_improvement_expenses
			months = normal_modifier_time
		}
		add_modifier = {
			name = improving_healthcare_modifier 
			months = normal_modifier_time
		}
		remove_modifier = underdeveloped_healthcare_modifier
		add_modifier = {
			name = underdeveloped_healthcare_modifier
			months = short_modifier_time
			is_decaying = yes
		}
	}
}

fer_increasing_population_button = {
	name = "increasing_population_button"
	desc = "increasing_population_button_desc"

	visible = {
		always = yes
	}

	ai_chance = {
		base = 100
		modifier = {
			trigger = {
				taking_loans = yes
			}
			add = -40
		}
		modifier = {
			trigger = {
				approaching_bureaucracy_shortage = yes
			}
			add = -30
		}
	}

	possible = {
		NOT = {
			bureaucracy < 0
		}
		NOT = {
			has_variable = var_increasing_population
		}
	}

	effect = {
		set_variable = {
			name = var_increasing_population
		}
		add_modifier = {
			name = national_improvement_expenses
			months = normal_modifier_time
		}
		add_modifier = {
			name = increasing_population_modifier 
			months = normal_modifier_time
		}
		remove_modifier = desolate_wasteland_modifier
		add_modifier = {
			name = desolate_wasteland_modifier
			months = short_modifier_time
			is_decaying = yes
		}
	}
}

fer_alleviating_poverty_button = {
	name = "alleviating_poverty_button"
	desc = "alleviating_poverty_button_desc"

	visible = {
		always = yes
	}

	ai_chance = {
		base = 100
		modifier = {
			trigger = {
				taking_loans = yes
			}
			add = -40
		}
		modifier = {
			trigger = {
				approaching_bureaucracy_shortage = yes
			}
			add = -30
		}
	}

	possible = {
		NOT = {
			bureaucracy < 0
		}
		NOT = {
			has_variable = var_alleviating_poverty
		}
	}

	effect = {
		set_variable = {
			name = var_alleviating_poverty
		}
		add_modifier = {
			name = national_improvement_expenses
			months = normal_modifier_time
		}
		add_modifier = {
			name = alleviating_poverty_modifier 
			months = normal_modifier_time
		}
		remove_modifier = widespread_poverty_modifier
		add_modifier = {
			name = widespread_poverty_modifier
			months = short_modifier_time
			is_decaying = yes
		}
	}
}

fer_expanding_industry_button = {
	name = "expanding_industry_button"
	desc = "expanding_industry_button_desc"

	visible = {
		always = yes
	}

	ai_chance = {
		base = 100
		modifier = {
			trigger = {
				taking_loans = yes
			}
			add = -30
		}
		modifier = {
			trigger = {
				approaching_bureaucracy_shortage = yes
			}
			add = -30
		}
	}

	possible = {
		NOT = {
			bureaucracy < 0
		}
		NOT = {
			has_variable = var_expanding_industry
		}
	}

	effect = {
		set_variable = {
			name = var_expanding_industry
		}
		add_modifier = {
			name = national_improvement_expenses
			multiplier = 1.8
			months = normal_modifier_time
		}
		add_modifier = {
			name = expanding_industry_modifier
			months = normal_modifier_time
		}
	}
}

fer_alleviating_poverty_button = {
	name = "alleviating_poverty_button"
	desc = "alleviating_poverty_button_desc"

	visible = {
		always = yes
	}

	ai_chance = {
		base = 100
		modifier = {
			trigger = {
				taking_loans = yes
			}
			add = -40
		}
		modifier = {
			trigger = {
				approaching_bureaucracy_shortage = yes
			}
			add = -30
		}
	}

	possible = {
		NOT = {
			bureaucracy < 0
		}
		NOT = {
			has_variable = var_alleviating_poverty
		}
	}

	effect = {
		set_variable = {
			name = var_alleviating_poverty
		}
		add_modifier = {
			name = national_improvement_expenses
			months = normal_modifier_time
		}
		add_modifier = {
			name = alleviating_poverty_modifier 
			months = normal_modifier_time
		}
		remove_modifier = widespread_poverty_modifier
		add_modifier = {
			name = widespread_poverty_modifier
			months = short_modifier_time
			is_decaying = yes
		}
	}
}

fer_improving_agriculture_button = {
	name = "improving_agriculture_button"
	desc = "improving_agriculture_button_desc"

	visible = {
		always = yes
	}

	ai_chance = {
		base = 100
		modifier = {
			trigger = {
				taking_loans = yes
			}
			add = -30
		}
		modifier = {
			trigger = {
				approaching_bureaucracy_shortage = yes
			}
			add = -30
		}
	}

	possible = {
		NOT = {
			bureaucracy < 0
		}
		NOT = {
			has_variable = var_improved_agriculture
		}
	}

	effect = {
		set_variable = {
			name = var_improved_agriculture
		}
		add_modifier = {
			name = national_improvement_expenses
			multiplier = 1.5
			months = normal_modifier_time
		}
		add_modifier = {
			name = improvements_in_agriculture_modifier 
			months = normal_modifier_time
		}
	}
}

fer_develop_agricultural_technology_button = {
	name = "fer_develop_agricultural_technology_button"
	desc = "fer_develop_agricultural_technology_button_desc"

	visible = {
		always = yes
	}

	ai_chance = {
		base = 100
		modifier = {
			trigger = {
				taking_loans = yes
			}
			add = -30
		}
		modifier = {
			trigger = {
				approaching_bureaucracy_shortage = yes
			}
			add = -30
		}
	}

	possible = {
		NOT = {
			bureaucracy < 0
		}
		NOT = {
			has_variable = var_agriculture_tech
		}
	}

	effect = {
		set_variable = {
			name = var_agriculture_tech
		}
		add_modifier = {
			name = national_improvement_expenses
			multiplier = 1.5
			months = normal_modifier_time
		}
		if = {
			limit = {
				can_research = 
			}
		}
	}
}

fer_develop_infrastructure_technology_button = {
	name = "develop_infrastructure_technology_button"
	desc = "develop_infrastructure_technology_button_desc"

	visible = {
		always = yes
	}

	ai_chance = {
		base = 100
		modifier = {
			trigger = {
				taking_loans = yes
			}
			add = -50
		}
		modifier = {
			trigger = {
				approaching_bureaucracy_shortage = yes
			}
			add = -30
		}
	}

	possible = {
		NOT = {
			bureaucracy < 0
		}
		NOT = {
			has_variable = var_developed_infra_tech
		}
	}

	effect = {
		set_variable = {
			name = var_developed_infra_tech
		}
		add_modifier = {
			name = national_improvement_expenses
			multiplier = 1.5
			months = normal_modifier_time
		}
		if = {
			limit = {
				NOT = {	
					has_technology_researched = atmospheric_engine
					has_technology_researched = machine_tools
				}
			}
			add_technology_progress = { progress = 2000 technology = railways }
			add_technology_progress = { progress = 2000 technology = mechanical_tools }
		}
		if = {
			limit = {
				can_research = railways
			}
			add_technology_progress = { progress = 3000 technology = railways }
		}
		if = {
			limit = {
				can_research = steel_railway_cars
			}
			add_technology_progress = { progress = 4000 technology = railways }
		}
	}
}

fer_reorganize_industrial_practices_button = {
	name = "reorganize_industrial_practices_button"
	desc = "reorganize_industrial_practices_button_desc"

	visible = {
		always = yes
	}

	ai_chance = {
		base = 100
		modifier = {
			trigger = {
				taking_loans = yes
			}
			add = -50
		}
		modifier = {
			trigger = {
				approaching_bureaucracy_shortage = yes
			}
			add = -30
		}
	}

	possible = {
		NOT = {
			bureaucracy < 0
		}
		NOT = {
			has_variable = var_reorganized_industrial_practices
		}
	}

	effect = {
		set_variable = {
			name = var_reorganized_industrial_practices
		}
		add_modifier = {
			name = reorganizing_industrial_practices
			months = normal_modifier_time
		}
		add_modifier = {
			name = national_improvement_expenses
			multiplier = 1.5
			months = normal_modifier_time
		}
	}
}

fer_buryatian_railway_button = {
	name = "buryatian_railway_button"
	desc = "buryatian_railway_button_desc"

	visible = {
		always = yes
	}

	ai_chance = {
		base = 100
		modifier = {
			trigger = {
				taking_loans = yes
			}
			add = -50
		}
		modifier = {
			trigger = {
				approaching_bureaucracy_shortage = yes
			}
			add = -30
		}
	}

	possible = {
		NOT = {
			bureaucracy < 0
		}
		has_technology_researched = railways
		NOT = {
			has_variable = var_buryatian_railway
		}
	}

	effect = {
		set_variable = {
			name = var_buryatian_railway
		}
		random_state = {
			limit = {
				state_region = s:STATE_BURYATIA
			}
			create_building = {
				building = building_railway
				add_ownership={
					country={
						country="c:FER"
						levels=1
					}
				}
			}
			create_building = {
				building = building_motor_industry
				add_ownership={
					country={
						country="c:FER"
						levels=1
					}
				}
			}
		}
		add_modifier = {
			name = national_improvement_expenses
			multiplier = 2.0
			months = long_modifier_time
		}
	}
}

fer_irkutsk_war_resume_preparations_button = {
	name = "fer_irkutsk_war_resume_preparations_button"
	desc = "fer_irkutsk_war_resume_preparations_button_desc"

	ai_chance = {
		base = 100
		modifier = {
			trigger = {
				taking_loans = yes
			}
			add = -70
		}
		modifier = {
			trigger = {
				approaching_bureaucracy_shortage = yes
			}
			add = -50
		}
	}

	possible = {
		NOT = {
			has_modifier = fer_irk_war_preparations
		}
	}

	effect = {
		if = {
			limit = {
				NOT = {
					has_modifier = fer_irk_war_preparations
				}
			}
			set_variable = {
				name = preparations_temp 
				value = root.army_power_projection
			}
			change_variable = {
				name = preparations_temp
				multiply = root.army_power_projection
				divide = irk.army_power_projection
			}
			add_modifier = {
				name = fer_irk_war_preparations
				multiplier = var:preparations_temp
			}
			remove_variable = preparations_temp
		}
	}
}

fer_irkutsk_war_cease_preparations_button = {
	name = "fer_irkutsk_war_cease_preparations_button"
	desc = "fer_irkutsk_war_cease_preparations_button_desc"

	ai_chance = {
		base = 0
		modifier = {
			trigger = {
				taking_loans = yes
			}
			add = 70
		}
		modifier = {
			trigger = {
				approaching_bureaucracy_shortage = yes
			}
			add = 50
		}
	}

	possible = {
		has_modifier = fer_irk_war_preparations
	}

	effect = {
		if = {
			limit = {
				has_modifier = fer_irk_war_preparations
			}
			remove_modifier = fer_irk_war_preparations
		}
	}
}

fer_irkutsk_war_cease_preparations_button = {
	name = "fer_irkutsk_war_cease_preparations_button"
	desc = "fer_irkutsk_war_cease_preparations_button_desc"

	ai_chance = {
		base = 40
		modifier = {
			trigger = {
				taking_loans = yes
			}
			add = -40
		}
		modifier = {
			trigger = {
				approaching_bureaucracy_shortage = yes
			}
			add = -30
		}
		modifier = {
			trigger = {
				this.army_power_projection < irk.army_power_projection
			}
			add = -20
		}
		modifier = {
			trigger = {
				je:je_the_irkutsk_war = {
					"scripted_bar_progress(fer_irkutsk_war_planning_progress_bar)" >= 60
				}
			}
			add = 30
		}
		modifier = {
			trigger = {
				je:je_the_irkutsk_war = {
					"scripted_bar_progress(fer_irkutsk_war_planning_progress_bar)" >= 80
				}
			}
			add = 30
		}
		modifier = {
			trigger = {
				je:je_the_irkutsk_war = {
					"scripted_bar_progress(fer_irkutsk_war_planning_progress_bar)" >= 100
				}
			}
			add = 100
		}
	}

	possible = {
		je:je_the_irkutsk_war = {
			"scripted_bar_progress(fer_irkutsk_war_planning_progress_bar)" >= 30
		}
	}

	effect = {
		je:je_the_irkutsk_war = {
			"scripted_bar_progress(fer_irkutsk_war_planning_progress_bar)" = {
				save_scope_as = planning_amount
			}
		}
		if = {
			limit = {
				has_modifier = fer_irk_war_preparations
			}
			remove_modifier = fer_irk_war_preparations
		}
		add_modifier = {
			name = fer_irk_war_planning_bonus
			multiplier = scope:planning_amount
		}
		c:FER = {
			create_diplomatic_play = {
				name = fer_irk_war
		
				target_state = s:STATE_IRKUTSK.region_state:IRK
			
				war = yes
			
				type = dp_annex

				add_war_goal = {
					holder = c:FER
					type = annex
				}
			}	
		}
	}
}
